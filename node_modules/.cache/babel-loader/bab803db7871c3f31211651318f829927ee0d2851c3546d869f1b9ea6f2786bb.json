{"ast":null,"code":"import React,{useState,useEffect}from'react';import FilmForm from'./FilmForm';import FilmList from'./FilmList';import Header from'./Header';import Footer from'./Footer';import'./App.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[films,setFilms]=useState([]);const[showForm,setShowForm]=useState(false);const[editableFilm,setEditableFilm]=useState(null);const fetchFilms=()=>{fetch('http://localhost:3000/films').then(response=>response.json()).then(data=>{setFilms(data);}).catch(error=>console.error('Error:',error));};const addFilm=filmData=>{const formData=new FormData();formData.append('title',filmData.title);formData.append('description',filmData.description);formData.append('rating',filmData.rating);formData.append('thumbnail',filmData.thumbnail);formData.append('video',filmData.file);fetch('http://localhost:3000/films',{method:'POST',body:formData}).then(response=>response.json()).then(()=>{fetchFilms();setShowForm(false);}).catch(error=>{console.error('Error:',error);});};const handleCancel=()=>{setShowForm(false);};const onCloseFormAndRefresh=()=>{setShowForm(false);setTimeout(()=>{window.location.reload();},100);};useEffect(()=>{fetchFilms();},[]);const deleteFilm=filmId=>{fetch(\"http://localhost:3000/films/\".concat(filmId),{method:'DELETE'}).then(response=>{if(response.ok){fetchFilms();}else{console.error('Failed to delete the film');}}).catch(error=>{console.error('Error:',error);});};const handleEditFilm=updatedFilm=>{fetch(\"http://localhost:3000/films/\".concat(updatedFilm.id),{method:'PUT',headers:{'Content-Type':'application/json'},body:JSON.stringify(updatedFilm)}).then(response=>{if(response.ok){fetchFilms();}else{console.error('Failed to update the film');}}).catch(error=>{console.error('Error:',error);});setShowForm(false);setEditableFilm(null);};const startEditFilm=film=>{setEditableFilm(film);setShowForm(true);};return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(Header,{}),\" \",/*#__PURE__*/_jsx(\"h1\",{children:\"Filmdatabas\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setShowForm(true);setEditableFilm(null);},children:\"Add New Film\"}),showForm&&/*#__PURE__*/_jsx(FilmForm,{filmToEdit:editableFilm,onAddFilm:addFilm,onEditFilm:handleEditFilm,onCancel:handleCancel,onCloseFormAndRefresh:onCloseFormAndRefresh}),/*#__PURE__*/_jsx(FilmList,{films:films,onDelete:deleteFilm,onEdit:startEditFilm}),/*#__PURE__*/_jsx(Footer,{}),\" \"]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","FilmForm","FilmList","Header","Footer","jsx","_jsx","jsxs","_jsxs","App","films","setFilms","showForm","setShowForm","editableFilm","setEditableFilm","fetchFilms","fetch","then","response","json","data","catch","error","console","addFilm","filmData","formData","FormData","append","title","description","rating","thumbnail","file","method","body","handleCancel","onCloseFormAndRefresh","setTimeout","window","location","reload","deleteFilm","filmId","concat","ok","handleEditFilm","updatedFilm","id","headers","JSON","stringify","startEditFilm","film","className","children","onClick","filmToEdit","onAddFilm","onEditFilm","onCancel","onDelete","onEdit"],"sources":["/Users/milad888/Desktop/HoÌˆgskolan/webb utveckling 2/inl5/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport FilmForm from './FilmForm';\nimport FilmList from './FilmList';\nimport Header from './Header';\nimport Footer from './Footer';\nimport './App.css';\n\n\n\nfunction App() {\n  const [films, setFilms] = useState([]);\n  const [showForm, setShowForm] = useState(false);\n  const [editableFilm, setEditableFilm] = useState(null);\n\n  const fetchFilms = () => {\n    fetch('http://localhost:3000/films')\n      .then(response => response.json())\n      .then(data => {\n        setFilms(data);\n      })\n      .catch(error => console.error('Error:', error));\n  };\n\n  const addFilm = (filmData) => {\n    const formData = new FormData();\n    formData.append('title', filmData.title);\n    formData.append('description', filmData.description);\n    formData.append('rating', filmData.rating);\n    formData.append('thumbnail', filmData.thumbnail);\n    formData.append('video', filmData.file);\n\n    fetch('http://localhost:3000/films', {\n      method: 'POST',\n      body: formData,\n    })\n      .then(response => response.json())\n      .then(() => {\n        fetchFilms();\n        setShowForm(false);\n      })\n      .catch((error) => {\n        console.error('Error:', error);\n      });\n  };\n\n  const handleCancel = () => {\n    setShowForm(false);\n  };\n\n\n  const onCloseFormAndRefresh = () => {\n    setShowForm(false);\n    setTimeout(() => {\n      window.location.reload();\n    }, 100);\n  };\n\n\n  useEffect(() => {\n    fetchFilms();\n  }, []);\n\n  const deleteFilm = (filmId) => {\n    fetch(`http://localhost:3000/films/${filmId}`, {\n      method: 'DELETE',\n    })\n      .then(response => {\n        if (response.ok) {\n          fetchFilms();\n        } else {\n          console.error('Failed to delete the film');\n        }\n      })\n      .catch((error) => {\n        console.error('Error:', error);\n      });\n  };\n\n  const handleEditFilm = (updatedFilm) => {\n    fetch(`http://localhost:3000/films/${updatedFilm.id}`, {\n      method: 'PUT',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(updatedFilm),\n    })\n      .then(response => {\n        if (response.ok) {\n          fetchFilms();\n        } else {\n          console.error('Failed to update the film');\n        }\n      })\n      .catch((error) => {\n        console.error('Error:', error);\n      });\n\n    setShowForm(false);\n    setEditableFilm(null);\n  };\n\n  const startEditFilm = (film) => {\n    setEditableFilm(film);\n    setShowForm(true);\n  };\n\n  return (\n    <div className=\"App\">\n      <Header /> { }\n      <h1>Filmdatabas</h1>\n      <button onClick={() => { setShowForm(true); setEditableFilm(null); }}>Add New Film</button>\n      {showForm && (\n        <FilmForm\n          filmToEdit={editableFilm}\n          onAddFilm={addFilm}\n          onEditFilm={handleEditFilm}\n          onCancel={handleCancel}\n          onCloseFormAndRefresh={onCloseFormAndRefresh}\n        />\n      )}\n      <FilmList\n        films={films}\n        onDelete={deleteFilm}\n        onEdit={startEditFilm}\n      />\n      <Footer /> { }\n    </div>\n  );\n}\n\nexport default App;\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}